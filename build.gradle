plugins {
    id 'java'
    id 'jacoco'
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.0.13'
    id 'checkstyle'
}

mainClassName = 'Pathfinder.Main'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation(platform('org.junit:junit-bom:5.9.2'))
    testImplementation('org.junit.jupiter:junit-jupiter')
}


javafx {
    version = '14'
    modules = [ 'javafx.controls', 'javafx.fxml' ]
}

jacocoTestReport {
    reports {
        xml.required = false
        csv.required = false
        html.outputLocation = layout.buildDirectory.dir('jacocoHtml')
    }
    
    afterEvaluate {
        classDirectories.setFrom(files(classDirectories.files.collect {
            fileTree(dir: it, exclude: [
                "Pathfinder/controllers/*.*",
                "Pathfinder/utility/Map*.*",
                "Pathfinder/utility/Vis*.*",
                "Pathfinder/domain/Node*.*"
            ])
        }))
    }
}

checkstyle {
    toolVersion '7.8.1'
    configFile file("/checkstyle.xml")
    ignoreFailures = true
}

checkstyleMain {
    source ='src/main/java/Pathfinder'
}

checkstyleTest {
    source ='src/test/java/Pathfinder'
}

test {
    useJUnitPlatform()
    finalizedBy jacocoTestReport
}